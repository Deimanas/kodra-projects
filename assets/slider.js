(function(){function KodraSlider(root){this.root=root;this.track=root.querySelector('.kodra-track');this.autoDelay=4500;this.duration=900;this.gap=getGap(this.track);this.visible=5;this.minCard=260;this.isDown=false;this.startX=0;this.deltaX=0;this.resumeTimeout=null;this.updateMeasurements(true);this.bindNav();this.attach();this.bindDrag();this.startAuto();window.addEventListener('resize',this.onResize.bind(this));}function getGap(el){var cs=window.getComputedStyle(el);var g=parseInt(cs.gap||cs.columnGap||'24',10);return isNaN(g)?24:g;}KodraSlider.prototype.setPerView=function(){var w=this.root.clientWidth,v=this.visible,g=this.gap;while(v>1&&((w-g*(v-1))/v)<this.minCard){v--;}var slideW=(w-g*(v-1))/v;this.root.style.setProperty('--kodra-slide-w',slideW+'px');this.perView=v;};KodraSlider.prototype.updateMeasurements=function(r){if(r){this.setPerView();}this.slides=Array.from(this.track.children);this.slideWidth=this.slides[0]?this.slides[0].getBoundingClientRect().width:0;this.step=this.slideWidth+this.gap;};KodraSlider.prototype.attach=function(){this.track.style.transition='transform '+(this.duration/1000)+'s ease';};KodraSlider.prototype.onResize=function(){this.gap=getGap(this.track);this.setPerView();this.updateMeasurements(false);this.jumpToStart();};KodraSlider.prototype.jumpToStart=function(){this.track.style.transition='none';this.track.style.transform='translateX(0px)';this.track.offsetHeight;this.attach();};KodraSlider.prototype.next=function(){var s=this;this.track.style.transform='translateX('+(-this.step)+'px)';clearTimeout(this.tReset);this.tReset=setTimeout(function(){s.track.appendChild(s.track.firstElementChild);s.jumpToStart();s.updateMeasurements(false);},this.duration);this.restartAutoAfterDelay();};KodraSlider.prototype.prev=function(){var s=this;this.track.style.transition='none';this.track.insertBefore(this.track.lastElementChild,this.track.firstElementChild);this.updateMeasurements(false);this.track.style.transform='translateX('+(-this.step)+'px)';this.track.offsetHeight;this.attach();this.track.style.transform='translateX(0px)';this.restartAutoAfterDelay();};KodraSlider.prototype.startAuto=function(){var s=this;this.stopAuto();this.timer=setInterval(function(){s.next();},this.autoDelay);};KodraSlider.prototype.stopAuto=function(){if(this.timer){clearInterval(this.timer);this.timer=null;}if(this.resumeTimeout){clearTimeout(this.resumeTimeout);this.resumeTimeout=null;}};KodraSlider.prototype.restartAutoAfterDelay=function(){var s=this;this.stopAuto();this.resumeTimeout=setTimeout(function(){s.startAuto();},this.autoDelay);};KodraSlider.prototype.bindNav=function(){var w=this.root.parentElement,p=w.querySelector('.kodra-prev'),n=w.querySelector('.kodra-next');if(p){p.addEventListener('click',this.prev.bind(this));}if(n){n.addEventListener('click',this.next.bind(this));}};KodraSlider.prototype.bindDrag=function(){var s=this,el=this.track,thr=50;el.addEventListener('pointerdown',function(e){s.isDown=true;s.startX=e.clientX;s.deltaX=0;s.stopAuto();el.style.transition='none';el.setPointerCapture&&el.setPointerCapture(e.pointerId);});el.addEventListener('pointermove',function(e){if(!s.isDown)return;s.deltaX=e.clientX-s.startX;el.style.transform='translateX('+s.deltaX+'px)';});function end(e){if(!s.isDown)return;el.style.transition='transform '+(s.duration/1000)+'s ease';if(s.deltaX<=-thr){s.next();}else if(s.deltaX>=thr){s.prev();}else{s.jumpToStart();s.restartAutoAfterDelay();}s.isDown=false;s.deltaX=0;el.releasePointerCapture&&el.releasePointerCapture(e.pointerId);}el.addEventListener('pointerup',end);el.addEventListener('pointercancel',end);el.addEventListener('pointerleave',function(e){if(s.isDown)end(e);});};document.addEventListener('DOMContentLoaded',function(){document.querySelectorAll('.kodra-slider').forEach(function(sl){new KodraSlider(sl);});});})();
